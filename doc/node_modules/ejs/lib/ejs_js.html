<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>ejs.js - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/darkfish.js"></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../Models/veggies_js.html">veggies.js</a>
  
    <li><a href="../../../express-partner-lab/README_md.html">README</a>
  
    <li><a href="../../../node_modules/accepts/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/accepts/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/accepts/README_md.html">README</a>
  
    <li><a href="../../../node_modules/accepts/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/accepts/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/array-flatten/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/array-flatten/README_md.html">README</a>
  
    <li><a href="../../../node_modules/array-flatten/array-flatten_js.html">array-flatten.js</a>
  
    <li><a href="../../../node_modules/array-flatten/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/body-parser/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/body-parser/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/body-parser/README_md.html">README</a>
  
    <li><a href="../../../node_modules/body-parser/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/body-parser/lib/read_js.html">read.js</a>
  
    <li><a href="../../../node_modules/body-parser/lib/types/json_js.html">json.js</a>
  
    <li><a href="../../../node_modules/body-parser/lib/types/raw_js.html">raw.js</a>
  
    <li><a href="../../../node_modules/body-parser/lib/types/text_js.html">text.js</a>
  
    <li><a href="../../../node_modules/body-parser/lib/types/urlencoded_js.html">urlencoded.js</a>
  
    <li><a href="../../../node_modules/body-parser/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/bytes/History_md.html">History</a>
  
    <li><a href="../../../node_modules/bytes/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/bytes/Readme_md.html">Readme</a>
  
    <li><a href="../../../node_modules/bytes/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/bytes/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/content-disposition/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/content-disposition/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/content-disposition/README_md.html">README</a>
  
    <li><a href="../../../node_modules/content-disposition/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/content-disposition/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/content-type/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/content-type/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/content-type/README_md.html">README</a>
  
    <li><a href="../../../node_modules/content-type/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/content-type/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/cookie-signature/History_md.html">History</a>
  
    <li><a href="../../../node_modules/cookie-signature/Readme_md.html">Readme</a>
  
    <li><a href="../../../node_modules/cookie-signature/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/cookie-signature/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/cookie/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/cookie/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/cookie/README_md.html">README</a>
  
    <li><a href="../../../node_modules/cookie/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/cookie/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/debug/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/debug/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/debug/Makefile.html">Makefile</a>
  
    <li><a href="../../../node_modules/debug/README_md.html">README</a>
  
    <li><a href="../../../node_modules/debug/component_json.html">component.json</a>
  
    <li><a href="../../../node_modules/debug/karma_conf_js.html">karma.conf.js</a>
  
    <li><a href="../../../node_modules/debug/node_js.html">node.js</a>
  
    <li><a href="../../../node_modules/debug/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/debug/src/browser_js.html">browser.js</a>
  
    <li><a href="../../../node_modules/debug/src/debug_js.html">debug.js</a>
  
    <li><a href="../../../node_modules/debug/src/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/debug/src/inspector-log_js.html">inspector-log.js</a>
  
    <li><a href="../../../node_modules/debug/src/node_js.html">node.js</a>
  
    <li><a href="../../../node_modules/depd/History_md.html">History</a>
  
    <li><a href="../../../node_modules/depd/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/depd/Readme_md.html">Readme</a>
  
    <li><a href="../../../node_modules/depd/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/depd/lib/browser/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/depd/lib/compat/callsite-tostring_js.html">callsite-tostring.js</a>
  
    <li><a href="../../../node_modules/depd/lib/compat/event-listener-count_js.html">event-listener-count.js</a>
  
    <li><a href="../../../node_modules/depd/lib/compat/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/depd/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/destroy/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/destroy/README_md.html">README</a>
  
    <li><a href="../../../node_modules/destroy/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/destroy/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/ee-first/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/ee-first/README_md.html">README</a>
  
    <li><a href="../../../node_modules/ee-first/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/ee-first/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/ejs/Jakefile.html">Jakefile</a>
  
    <li><a href="../../../node_modules/ejs/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/ejs/README_md.html">README</a>
  
    <li><a href="../../../node_modules/ejs/ejs_js.html">ejs.js</a>
  
    <li><a href="../../../node_modules/ejs/ejs_min_js.html">ejs.min.js</a>
  
    <li><a href="../../../node_modules/ejs/lib/ejs_js.html">ejs.js</a>
  
    <li><a href="../../../node_modules/ejs/lib/utils_js.html">utils.js</a>
  
    <li><a href="../../../node_modules/ejs/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/encodeurl/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/encodeurl/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/encodeurl/README_md.html">README</a>
  
    <li><a href="../../../node_modules/encodeurl/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/encodeurl/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/escape-html/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/escape-html/Readme_md.html">Readme</a>
  
    <li><a href="../../../node_modules/escape-html/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/escape-html/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/etag/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/etag/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/etag/README_md.html">README</a>
  
    <li><a href="../../../node_modules/etag/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/etag/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/express/History_md.html">History</a>
  
    <li><a href="../../../node_modules/express/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/express/Readme_md.html">Readme</a>
  
    <li><a href="../../../node_modules/express/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/express/lib/application_js.html">application.js</a>
  
    <li><a href="../../../node_modules/express/lib/express_js.html">express.js</a>
  
    <li><a href="../../../node_modules/express/lib/middleware/init_js.html">init.js</a>
  
    <li><a href="../../../node_modules/express/lib/middleware/query_js.html">query.js</a>
  
    <li><a href="../../../node_modules/express/lib/request_js.html">request.js</a>
  
    <li><a href="../../../node_modules/express/lib/response_js.html">response.js</a>
  
    <li><a href="../../../node_modules/express/lib/router/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/express/lib/router/layer_js.html">layer.js</a>
  
    <li><a href="../../../node_modules/express/lib/router/route_js.html">route.js</a>
  
    <li><a href="../../../node_modules/express/lib/utils_js.html">utils.js</a>
  
    <li><a href="../../../node_modules/express/lib/view_js.html">view.js</a>
  
    <li><a href="../../../node_modules/express/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/finalhandler/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/finalhandler/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/finalhandler/README_md.html">README</a>
  
    <li><a href="../../../node_modules/finalhandler/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/finalhandler/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/forwarded/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/forwarded/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/forwarded/README_md.html">README</a>
  
    <li><a href="../../../node_modules/forwarded/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/forwarded/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/fresh/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/fresh/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/fresh/README_md.html">README</a>
  
    <li><a href="../../../node_modules/fresh/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/fresh/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/http-errors/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/http-errors/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/http-errors/README_md.html">README</a>
  
    <li><a href="../../../node_modules/http-errors/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/http-errors/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/Changelog_md.html">Changelog</a>
  
    <li><a href="../../../node_modules/iconv-lite/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/iconv-lite/README_md.html">README</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/dbcs-codec_js.html">dbcs-codec.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/dbcs-data_js.html">dbcs-data.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/internal_js.html">internal.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/sbcs-codec_js.html">sbcs-codec.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/sbcs-data-generated_js.html">sbcs-data-generated.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/sbcs-data_js.html">sbcs-data.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/big5-added_json.html">big5-added.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/cp936_json.html">cp936.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/cp949_json.html">cp949.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/cp950_json.html">cp950.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/eucjp_json.html">eucjp.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/gb18030-ranges_json.html">gb18030-ranges.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/gbk-added_json.html">gbk-added.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/shiftjis_json.html">shiftjis.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/utf16_js.html">utf16.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/utf7_js.html">utf7.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/bom-handling_js.html">bom-handling.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/extend-node_js.html">extend-node.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/streams_js.html">streams.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/inherits/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/inherits/README_md.html">README</a>
  
    <li><a href="../../../node_modules/inherits/inherits_js.html">inherits.js</a>
  
    <li><a href="../../../node_modules/inherits/inherits_browser_js.html">inherits_browser.js</a>
  
    <li><a href="../../../node_modules/inherits/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/ipaddr_js/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/ipaddr_js/README_md.html">README</a>
  
    <li><a href="../../../node_modules/ipaddr_js/ipaddr_min_js.html">ipaddr.min.js</a>
  
    <li><a href="../../../node_modules/ipaddr_js/lib/ipaddr_js.html">ipaddr.js</a>
  
    <li><a href="../../../node_modules/ipaddr_js/lib/ipaddr_js_d_ts.html">ipaddr.js.d.ts</a>
  
    <li><a href="../../../node_modules/ipaddr_js/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/media-typer/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/media-typer/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/media-typer/README_md.html">README</a>
  
    <li><a href="../../../node_modules/media-typer/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/media-typer/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/merge-descriptors/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/merge-descriptors/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/merge-descriptors/README_md.html">README</a>
  
    <li><a href="../../../node_modules/merge-descriptors/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/merge-descriptors/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/method-override/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/method-override/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/method-override/README_md.html">README</a>
  
    <li><a href="../../../node_modules/method-override/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/Makefile.html">Makefile</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/README_md.html">README</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/karma_conf_js.html">karma.conf.js</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/node_js.html">node.js</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/src/browser_js.html">browser.js</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/src/debug_js.html">debug.js</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/src/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/method-override/node_modules/debug/src/node_js.html">node.js</a>
  
    <li><a href="../../../node_modules/method-override/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/methods/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/methods/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/methods/README_md.html">README</a>
  
    <li><a href="../../../node_modules/methods/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/methods/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/mime-db/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/mime-db/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/mime-db/README_md.html">README</a>
  
    <li><a href="../../../node_modules/mime-db/db_json.html">db.json</a>
  
    <li><a href="../../../node_modules/mime-db/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/mime-db/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/mime-types/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/mime-types/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/mime-types/README_md.html">README</a>
  
    <li><a href="../../../node_modules/mime-types/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/mime-types/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/mime/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/mime/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/mime/README_md.html">README</a>
  
    <li><a href="../../../node_modules/mime/cli_js.html">cli.js</a>
  
    <li><a href="../../../node_modules/mime/mime_js.html">mime.js</a>
  
    <li><a href="../../../node_modules/mime/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/mime/src/build_js.html">build.js</a>
  
    <li><a href="../../../node_modules/mime/src/test_js.html">test.js</a>
  
    <li><a href="../../../node_modules/mime/types_json.html">types.json</a>
  
    <li><a href="../../../node_modules/ms/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/ms/license_md.html">license</a>
  
    <li><a href="../../../node_modules/ms/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/ms/readme_md.html">readme</a>
  
    <li><a href="../../../node_modules/negotiator/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/negotiator/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/negotiator/README_md.html">README</a>
  
    <li><a href="../../../node_modules/negotiator/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/negotiator/lib/charset_js.html">charset.js</a>
  
    <li><a href="../../../node_modules/negotiator/lib/encoding_js.html">encoding.js</a>
  
    <li><a href="../../../node_modules/negotiator/lib/language_js.html">language.js</a>
  
    <li><a href="../../../node_modules/negotiator/lib/mediaType_js.html">mediaType.js</a>
  
    <li><a href="../../../node_modules/negotiator/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/on-finished/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/on-finished/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/on-finished/README_md.html">README</a>
  
    <li><a href="../../../node_modules/on-finished/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/on-finished/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/parseurl/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/parseurl/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/parseurl/README_md.html">README</a>
  
    <li><a href="../../../node_modules/parseurl/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/parseurl/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/path-to-regexp/History_md.html">History</a>
  
    <li><a href="../../../node_modules/path-to-regexp/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/path-to-regexp/Readme_md.html">Readme</a>
  
    <li><a href="../../../node_modules/path-to-regexp/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/path-to-regexp/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/proxy-addr/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/proxy-addr/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/proxy-addr/README_md.html">README</a>
  
    <li><a href="../../../node_modules/proxy-addr/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/proxy-addr/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/qs/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/qs/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/qs/README_md.html">README</a>
  
    <li><a href="../../../node_modules/qs/dist/qs_js.html">qs.js</a>
  
    <li><a href="../../../node_modules/qs/lib/formats_js.html">formats.js</a>
  
    <li><a href="../../../node_modules/qs/lib/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/qs/lib/parse_js.html">parse.js</a>
  
    <li><a href="../../../node_modules/qs/lib/stringify_js.html">stringify.js</a>
  
    <li><a href="../../../node_modules/qs/lib/utils_js.html">utils.js</a>
  
    <li><a href="../../../node_modules/qs/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/qs/test/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/qs/test/parse_js.html">parse.js</a>
  
    <li><a href="../../../node_modules/qs/test/stringify_js.html">stringify.js</a>
  
    <li><a href="../../../node_modules/qs/test/utils_js.html">utils.js</a>
  
    <li><a href="../../../node_modules/range-parser/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/range-parser/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/range-parser/README_md.html">README</a>
  
    <li><a href="../../../node_modules/range-parser/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/range-parser/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/raw-body/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/raw-body/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/raw-body/README_md.html">README</a>
  
    <li><a href="../../../node_modules/raw-body/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../../node_modules/raw-body/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/raw-body/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/safe-buffer/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/safe-buffer/README_md.html">README</a>
  
    <li><a href="../../../node_modules/safe-buffer/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../../node_modules/safe-buffer/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/safe-buffer/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/safer-buffer/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/safer-buffer/Porting-Buffer_md.html">Porting-Buffer</a>
  
    <li><a href="../../../node_modules/safer-buffer/Readme_md.html">Readme</a>
  
    <li><a href="../../../node_modules/safer-buffer/dangerous_js.html">dangerous.js</a>
  
    <li><a href="../../../node_modules/safer-buffer/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/safer-buffer/safer_js.html">safer.js</a>
  
    <li><a href="../../../node_modules/safer-buffer/tests_js.html">tests.js</a>
  
    <li><a href="../../../node_modules/send/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/send/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/send/README_md.html">README</a>
  
    <li><a href="../../../node_modules/send/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/send/node_modules/ms/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/send/node_modules/ms/license_md.html">license</a>
  
    <li><a href="../../../node_modules/send/node_modules/ms/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/send/node_modules/ms/readme_md.html">readme</a>
  
    <li><a href="../../../node_modules/send/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/serve-static/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/serve-static/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/serve-static/README_md.html">README</a>
  
    <li><a href="../../../node_modules/serve-static/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/serve-static/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/setprototypeof/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/setprototypeof/README_md.html">README</a>
  
    <li><a href="../../../node_modules/setprototypeof/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../../node_modules/setprototypeof/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/setprototypeof/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/setprototypeof/test/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/statuses/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/statuses/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/statuses/README_md.html">README</a>
  
    <li><a href="../../../node_modules/statuses/codes_json.html">codes.json</a>
  
    <li><a href="../../../node_modules/statuses/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/statuses/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/toidentifier/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/toidentifier/README_md.html">README</a>
  
    <li><a href="../../../node_modules/toidentifier/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/toidentifier/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/type-is/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/type-is/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/type-is/README_md.html">README</a>
  
    <li><a href="../../../node_modules/type-is/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/type-is/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/unpipe/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/unpipe/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/unpipe/README_md.html">README</a>
  
    <li><a href="../../../node_modules/unpipe/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/unpipe/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/utils-merge/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/utils-merge/README_md.html">README</a>
  
    <li><a href="../../../node_modules/utils-merge/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/utils-merge/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/vary/HISTORY_md.html">HISTORY</a>
  
    <li><a href="../../../node_modules/vary/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/vary/README_md.html">README</a>
  
    <li><a href="../../../node_modules/vary/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/vary/package_json.html">package.json</a>
  
    <li><a href="../../../package-lock_json.html">package-lock.json</a>
  
    <li><a href="../../../package_json.html">package.json</a>
  
    <li><a href="../../../server_js.html">server.js</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page node_modules/ejs/lib/ejs.js">

<pre>EJS Embedded JavaScript templates
Copyright 2112 Matthew Eernisse (mde@fleegix.org)

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

        http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</pre>

<p>&#39;use strict&#39;;</p>

<pre> @file Embedded JavaScript templating engine. {@link http://ejs.co}
 @author Matthew Eernisse &lt;mde@fleegix.org&gt;
 @author Tiancheng &quot;Timothy&quot; Gu &lt;timothygu99@gmail.com&gt;
 @project EJS
 @license {@link http://www.apache.org/licenses/LICENSE-2.0 Apache License, Version 2.0}
/</pre>

<p>/**</p>

<pre> EJS internal functions.

 Technically this &quot;module&quot; lies in the same file as {@link module:ejs}, for
 the sake of organization all the private functions re grouped into this
 module.

 @module ejs-internal
 @private
/</pre>

<p>/**</p>

<pre> Embedded JavaScript templating engine.

 @module ejs
 @public
/</pre>

<p>var fs = require(&#39;fs&#39;); var path = require(&#39;path&#39;); var
utils = require(&#39;./utils&#39;);</p>

<p>var scopeOptionWarned = false; var _VERSION_STRING =
require(&#39;../package.json&#39;).version; var _DEFAULT_OPEN_DELIMITER =
&#39;&lt;&#39;; var _DEFAULT_CLOSE_DELIMITER = &#39;&gt;&#39;; var
_DEFAULT_DELIMITER = &#39;%&#39;; var _DEFAULT_LOCALS_NAME =
&#39;locals&#39;; var _NAME = &#39;ejs&#39;; var _REGEX_STRING =
&#39;(&lt;%%|%%&gt;|&lt;%=|&lt;%-|&lt;%_|&lt;%#|&lt;%|%&gt;|-%&gt;|_%&gt;)&#39;;
var _OPTS_PASSABLE_WITH_DATA = [&#39;delimiter&#39;, &#39;scope&#39;,
&#39;context&#39;, &#39;debug&#39;, &#39;compileDebug&#39;,</p>

<pre>&#39;client&#39;, &#39;_with&#39;, &#39;rmWhitespace&#39;, &#39;strict&#39;, &#39;filename&#39;, &#39;async&#39;];</pre>

<p>// We don&#39;t allow &#39;cache&#39; option to be passed in the data obj
for // the normal `render` call, but this is where Express 2 &amp; 3 put it
// so we make an exception for `renderFile` var
_OPTS_PASSABLE_WITH_DATA_EXPRESS =
_OPTS_PASSABLE_WITH_DATA.concat(&#39;cache&#39;); var _BOM = /^uFEFF/;</p>

<p>/**</p>

<pre> EJS template function cache. This can be a LRU object from lru-cache NPM
 module. By default, it is {@link module:utils.cache}, a simple in-process
 cache that grows continuously.

 @type {Cache}
/</pre>

<p>exports.cache = utils.cache;</p>

<p>/**</p>

<pre> Custom file loader. Useful for template preprocessing or restricting access
 to a certain part of the filesystem.

 @type {fileLoader}
/</pre>

<p>exports.fileLoader = fs.readFileSync;</p>

<p>/**</p>

<pre> Name of the object containing the locals.

 This variable is overridden by {@link Options}`.localsName` if it is not
 `undefined`.

 @type {String}
 @public
/</pre>

<p>exports.localsName = _DEFAULT_LOCALS_NAME;</p>

<p>/**</p>

<pre> Promise implementation -- defaults to the native implementation if available
 This is mostly just for testability

 @type {Function}
 @public
/</pre>

<p>exports.promiseImpl = (new Function(&#39;return this;&#39;))().Promise;</p>

<p>/**</p>

<pre> Get the path to the included file from the parent file path and the
 specified path.

 @param {String}  name     specified path
 @param {String}  filename parent file path
 @param {Boolean} isDir    parent file path whether is directory
 @return {String}
/</pre>

<p>exports.resolveInclude = function(name, filename, isDir) {</p>

<pre>var dirname = path.dirname;
var extname = path.extname;
var resolve = path.resolve;
var includePath = resolve(isDir ? filename : dirname(filename), name);
var ext = extname(name);
if (!ext) {
  includePath += &#39;.ejs&#39;;
}
return includePath;</pre>

<p>};</p>

<p>/**</p>

<pre> Get the path to the included file by Options

 @param  {String}  path    specified path
 @param  {Options} options compilation options
 @return {String}
/</pre>

<p>function getIncludePath(path, options) {</p>

<pre>var includePath;
var filePath;
var views = options.views;
var match = /^[A-Za-z]+:\\|^\//.exec(path);

// Abs path
if (match &amp;&amp; match.length) {
  includePath = exports.resolveInclude(path.replace(/^\/  ,&#39;&#39;), options.root || &#39;/&#39;, true);
}
// Relative paths
else {
  // Look relative to a passed filename first
  if (options.filename) {
    filePath = exports.resolveInclude(path, options.filename);
    if (fs.existsSync(filePath)) {
      includePath = filePath;
    }
  }
  // Then look in any views directories
  if (!includePath) {
    if (Array.isArray(views) &amp;&amp; views.some(function (v) {
      filePath = exports.resolveInclude(path, v, true);
      return fs.existsSync(filePath);
    })) {
      includePath = filePath;
    }
  }
  if (!includePath) {
    throw new Error(&#39;Could not find the include file &quot;&#39; +
        options.escapeFunction(path) + &#39;&quot;&#39;);
  }
}
return includePath;</pre>

<p>}</p>

<p>/**</p>

<pre> Get the template from a string or a file, either compiled on-the-fly or
 read from cache (if enabled), and cache the template if needed.

 If `template` is not set, the file specified in `options.filename` will be
 read.

 If `options.cache` is true, this function reads the file from
 `options.filename` so it must be set prior to calling this function.

 @memberof module:ejs-internal
 @param {Options} options   compilation options
 @param {String} [template] template source
 @return {(TemplateFunction|ClientFunction)}
 Depending on the value of `options.client`, either type might be returned.
 @static
/</pre>

<p>function handleCache(options, template) {</p>

<pre>var func;
var filename = options.filename;
var hasTemplate = arguments.length &gt; 1;

if (options.cache) {
  if (!filename) {
    throw new Error(&#39;cache option requires a filename&#39;);
  }
  func = exports.cache.get(filename);
  if (func) {
    return func;
  }
  if (!hasTemplate) {
    template = fileLoader(filename).toString().replace(_BOM, &#39;&#39;);
  }
}
else if (!hasTemplate) {
  // istanbul ignore if: should not happen at all
  if (!filename) {
    throw new Error(&#39;Internal EJS error: no file name or template &#39;
                  + &#39;provided&#39;);
  }
  template = fileLoader(filename).toString().replace(_BOM, &#39;&#39;);
}
func = exports.compile(template, options);
if (options.cache) {
  exports.cache.set(filename, func);
}
return func;</pre>

<p>}</p>

<p>/**</p>

<pre> Try calling handleCache with the given options and data and call the
 callback with the result. If an error occurs, call the callback with
 the error. Used by renderFile().

 @memberof module:ejs-internal
 @param {Options} options    compilation options
 @param {Object} data        template data
 @param {RenderFileCallback} cb callback
 @static
/</pre>

<p>function tryHandleCache(options, data, cb) {</p>

<pre>var result;
if (!cb) {
  if (typeof exports.promiseImpl == &#39;function&#39;) {
    return new exports.promiseImpl(function (resolve, reject) {
      try {
        result = handleCache(options)(data);
        resolve(result);
      }
      catch (err) {
        reject(err);
      }
    });
  }
  else {
    throw new Error(&#39;Please provide a callback function&#39;);
  }
}
else {
  try {
    result = handleCache(options)(data);
  }
  catch (err) {
    return cb(err);
  }

  cb(null, result);
}</pre>

<p>}</p>

<p>/**</p>

<pre> fileLoader is independent

 @param {String} filePath ejs file path.
 @return {String} The contents of the specified file.
 @static
/</pre>

<p>function fileLoader(filePath){</p>

<pre class="ruby"><span class="ruby-keyword">return</span> <span class="ruby-identifier">exports</span>.<span class="ruby-identifier">fileLoader</span>(<span class="ruby-identifier">filePath</span>);
</pre>

<p>}</p>

<p>/**</p>

<pre> Get the template function.

 If `options.cache` is `true`, then the template is cached.

 @memberof module:ejs-internal
 @param {String}  path    path for the specified file
 @param {Options} options compilation options
 @return {(TemplateFunction|ClientFunction)}
 Depending on the value of `options.client`, either type might be returned
 @static
/</pre>

<p>function includeFile(path, options) {</p>

<pre class="ruby"><span class="ruby-identifier">var</span> <span class="ruby-identifier">opts</span> = <span class="ruby-identifier">utils</span>.<span class="ruby-identifier">shallowCopy</span>({}, <span class="ruby-identifier">options</span>);
<span class="ruby-identifier">opts</span>.<span class="ruby-identifier">filename</span> = <span class="ruby-identifier">getIncludePath</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">opts</span>);
<span class="ruby-keyword">return</span> <span class="ruby-identifier">handleCache</span>(<span class="ruby-identifier">opts</span>);
</pre>

<p>}</p>

<p>/**</p>

<pre> Get the JavaScript source of an included file.

 @memberof module:ejs-internal
 @param {String}  path    path for the specified file
 @param {Options} options compilation options
 @return {Object}
 @static
/</pre>

<p>function includeSource(path, options) {</p>

<pre>var opts = utils.shallowCopy({}, options);
var includePath;
var template;
includePath = getIncludePath(path, opts);
template = fileLoader(includePath).toString().replace(_BOM, &#39;&#39;);
opts.filename = includePath;
var templ = new Template(template, opts);
templ.generateSource();
return {
  source: templ.source,
  filename: includePath,
  template: template
};</pre>

<p>}</p>

<p>/**</p>

<pre> Re-throw the given `err` in context to the `str` of ejs, `filename`, and
 `lineno`.

 @implements RethrowCallback
 @memberof module:ejs-internal
 @param {Error}  err      Error object
 @param {String} str      EJS source
 @param {String} filename file name of the EJS file
 @param {String} lineno   line number of the error
 @static
/</pre>

<p>function rethrow(err, str, flnm, lineno, esc){</p>

<pre>var lines = str.split(&#39;\n&#39;);
var start = Math.max(lineno - 3, 0);
var end = Math.min(lines.length, lineno + 3);
var filename = esc(flnm); // eslint-disable-line
// Error context
var context = lines.slice(start, end).map(function (line, i){
  var curr = i + start + 1;
  return (curr == lineno ? &#39; &gt;&gt; &#39; : &#39;    &#39;)
    + curr
    + &#39;| &#39;
    + line;
}).join(&#39;\n&#39;);

// Alter exception message
err.path = filename;
err.message = (filename || &#39;ejs&#39;) + &#39;:&#39;
  + lineno + &#39;\n&#39;
  + context + &#39;\n\n&#39;
  + err.message;

throw err;</pre>

<p>}</p>

<p>function stripSemi(str){</p>

<pre class="ruby"><span class="ruby-keyword">return</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-regexp">/;(\s*$)/</span>, <span class="ruby-string">&#39;$1&#39;</span>);
</pre>

<p>}</p>

<p>/**</p>

<pre> Compile the given `str` of ejs into a template function.

 @param {String}  template EJS template

 @param {Options} opts     compilation options

 @return {(TemplateFunction|ClientFunction)}
 Depending on the value of `opts.client`, either type might be returned.
 Note that the return type of the function also depends on the value of `opts.async`.
 @public
/</pre>

<p>exports.compile = function compile(template, opts) {</p>

<pre>var templ;

// v1 compat
// &#39;scope&#39; is &#39;context&#39;
// FIXME: Remove this in a future version
if (opts &amp;&amp; opts.scope) {
  if (!scopeOptionWarned){
    console.warn(&#39;`scope` option is deprecated and will be removed in EJS 3&#39;);
    scopeOptionWarned = true;
  }
  if (!opts.context) {
    opts.context = opts.scope;
  }
  delete opts.scope;
}
templ = new Template(template, opts);
return templ.compile();</pre>

<p>};</p>

<p>/**</p>

<pre> Render the given `template` of ejs.

 If you would like to include options but not data, you need to explicitly
 call this function with `data` being an empty object or `null`.

 @param {String}   template EJS template
 @param {Object}  [data={}] template data
 @param {Options} [opts={}] compilation and rendering options
 @return {(String|Promise&lt;String&gt;)}
 Return value type depends on `opts.async`.
 @public
/</pre>

<p>exports.render = function (template, d, o) {</p>

<pre>var data = d || {};
var opts = o || {};

// No options object -- if there are optiony names
// in the data, copy them to options
if (arguments.length == 2) {
  utils.shallowCopyFromList(opts, data, _OPTS_PASSABLE_WITH_DATA);
}

return handleCache(opts, template)(data);</pre>

<p>};</p>

<p>/**</p>

<pre> Render an EJS file at the given `path` and callback `cb(err, str)`.

 If you would like to include options but not data, you need to explicitly
 call this function with `data` being an empty object or `null`.

 @param {String}             path     path to the EJS file
 @param {Object}            [data={}] template data
 @param {Options}           [opts={}] compilation and rendering options
 @param {RenderFileCallback} cb callback
 @public
/</pre>

<p>exports.renderFile = function () {</p>

<pre>var args = Array.prototype.slice.call(arguments);
var filename = args.shift();
var cb;
var opts = {filename: filename};
var data;
var viewOpts;

// Do we have a callback?
if (typeof arguments[arguments.length - 1] == &#39;function&#39;) {
  cb = args.pop();
}
// Do we have data/opts?
if (args.length) {
  // Should always have data obj
  data = args.shift();
  // Normal passed opts (data obj + opts obj)
  if (args.length) {
    // Use shallowCopy so we don&#39;t pollute passed in opts obj with new vals
    utils.shallowCopy(opts, args.pop());
  }
  // Special casing for Express (settings + opts-in-data)
  else {
    // Express 3 and 4
    if (data.settings) {
      // Pull a few things from known locations
      if (data.settings.views) {
        opts.views = data.settings.views;
      }
      if (data.settings[&#39;view cache&#39;]) {
        opts.cache = true;
      }
      // Undocumented after Express 2, but still usable, esp. for
      // items that are unsafe to be passed along with data, like `root`
      viewOpts = data.settings[&#39;view options&#39;];
      if (viewOpts) {
        utils.shallowCopy(opts, viewOpts);
      }
    }
    // Express 2 and lower, values set in app.locals, or people who just
    // want to pass options in their data. NOTE: These values will override
    // anything previously set in settings  or settings[&#39;view options&#39;]
    utils.shallowCopyFromList(opts, data, _OPTS_PASSABLE_WITH_DATA_EXPRESS);
  }
  opts.filename = filename;
}
else {
  data = {};
}

return tryHandleCache(opts, data, cb);</pre>

<p>};</p>

<p>/**</p>

<pre> Clear intermediate JavaScript cache. Calls {@link Cache#reset}.
 @public
/</pre>

<p>/**</p>

<pre> EJS template class
 @public
/</pre>

<p>exports.Template = Template;</p>

<p>exports.clearCache = function () {</p>

<pre class="ruby"><span class="ruby-identifier">exports</span>.<span class="ruby-identifier">cache</span>.<span class="ruby-identifier">reset</span>();
</pre>

<p>};</p>

<p>function Template(text, opts) {</p>

<pre>opts = opts || {};
var options = {};
this.templateText = text;
this.mode = null;
this.truncate = false;
this.currentLine = 1;
this.source = &#39;&#39;;
this.dependencies = [];
options.client = opts.client || false;
options.escapeFunction = opts.escape || opts.escapeFunction || utils.escapeXML;
options.compileDebug = opts.compileDebug !== false;
options.debug = !!opts.debug;
options.filename = opts.filename;
options.openDelimiter = opts.openDelimiter || exports.openDelimiter || _DEFAULT_OPEN_DELIMITER;
options.closeDelimiter = opts.closeDelimiter || exports.closeDelimiter || _DEFAULT_CLOSE_DELIMITER;
options.delimiter = opts.delimiter || exports.delimiter || _DEFAULT_DELIMITER;
options.strict = opts.strict || false;
options.context = opts.context;
options.cache = opts.cache || false;
options.rmWhitespace = opts.rmWhitespace;
options.root = opts.root;
options.outputFunctionName = opts.outputFunctionName;
options.localsName = opts.localsName || exports.localsName || _DEFAULT_LOCALS_NAME;
options.views = opts.views;
options.async = opts.async;

if (options.strict) {
  options._with = false;
}
else {
  options._with = typeof opts._with != &#39;undefined&#39; ? opts._with : true;
}

this.opts = options;

this.regex = this.createRegex();</pre>

<p>}</p>

<p>Template.modes = {</p>

<pre>EVAL: &#39;eval&#39;,
ESCAPED: &#39;escaped&#39;,
RAW: &#39;raw&#39;,
COMMENT: &#39;comment&#39;,
LITERAL: &#39;literal&#39;</pre>

<p>};</p>

<p>Template.prototype = {</p>

<pre>createRegex: function () {
  var str = _REGEX_STRING;
  var delim = utils.escapeRegExpChars(this.opts.delimiter);
  var open = utils.escapeRegExpChars(this.opts.openDelimiter);
  var close = utils.escapeRegExpChars(this.opts.closeDelimiter);
  str = str.replace(/%/g, delim)
    .replace(/&lt;/g, open)
    .replace(/&gt;/g, close);
  return new RegExp(str);
},

compile: function () {
  var src;
  var fn;
  var opts = this.opts;
  var prepended = &#39;&#39;;
  var appended = &#39;&#39;;
  var escapeFn = opts.escapeFunction;
  var ctor;

  if (!this.source) {
    this.generateSource();
    prepended += &#39;  var __output = [], __append = __output.push.bind(__output);&#39; + &#39;\n&#39;;
    if (opts.outputFunctionName) {
      prepended += &#39;  var &#39; + opts.outputFunctionName + &#39; = __append;&#39; + &#39;\n&#39;;
    }
    if (opts._with !== false) {
      prepended +=  &#39;  with (&#39; + opts.localsName + &#39; || {}) {&#39; + &#39;\n&#39;;
      appended += &#39;  }&#39; + &#39;\n&#39;;
    }
    appended += &#39;  return __output.join(&quot;&quot;);&#39; + &#39;\n&#39;;
    this.source = prepended + this.source + appended;
  }

  if (opts.compileDebug) {
    src = &#39;var __line = 1&#39; + &#39;\n&#39;
      + &#39;  , __lines = &#39; + JSON.stringify(this.templateText) + &#39;\n&#39;
      + &#39;  , __filename = &#39; + (opts.filename ?
      JSON.stringify(opts.filename) : &#39;undefined&#39;) + &#39;;&#39; + &#39;\n&#39;
      + &#39;try {&#39; + &#39;\n&#39;
      + this.source
      + &#39;} catch (e) {&#39; + &#39;\n&#39;
      + &#39;  rethrow(e, __lines, __filename, __line, escapeFn);&#39; + &#39;\n&#39;
      + &#39;}&#39; + &#39;\n&#39;;
  }
  else {
    src = this.source;
  }

  if (opts.client) {
    src = &#39;escapeFn = escapeFn || &#39; + escapeFn.toString() + &#39;;&#39; + &#39;\n&#39; + src;
    if (opts.compileDebug) {
      src = &#39;rethrow = rethrow || &#39; + rethrow.toString() + &#39;;&#39; + &#39;\n&#39; + src;
    }
  }

  if (opts.strict) {
    src = &#39;&quot;use strict&quot;;\n&#39; + src;
  }
  if (opts.debug) {
    console.log(src);
  }

  try {
    if (opts.async) {
      // Have to use generated function for this, since in envs without support,
      // it breaks in parsing
      try {
        ctor = (new Function(&#39;return (async function(){}).constructor;&#39;))();
      }
      catch(e) {
        if (e instanceof SyntaxError) {
          throw new Error(&#39;This environment does not support async/await&#39;);
        }
        else {
          throw e;
        }
      }
    }
    else {
      ctor = Function;
    }
    fn = new ctor(opts.localsName + &#39;, escapeFn, include, rethrow&#39;, src);
  }
  catch(e) {
    // istanbul ignore else
    if (e instanceof SyntaxError) {
      if (opts.filename) {
        e.message += &#39; in &#39; + opts.filename;
      }
      e.message += &#39; while compiling ejs\n\n&#39;;
      e.message += &#39;If the above error is not helpful, you may want to try EJS-Lint:\n&#39;;
      e.message += &#39;https://github.com/RyanZim/EJS-Lint&#39;;
      if (!e.async) {
        e.message += &#39;\n&#39;;
        e.message += &#39;Or, if you meant to create an async function, pass async: true as an option.&#39;;
      }
    }
    throw e;
  }

  if (opts.client) {
    fn.dependencies = this.dependencies;
    return fn;
  }

  // Return a callable function which will execute the function
  // created by the source-code, with the passed data as locals
  // Adds a local `include` function which allows full recursive include
  var returnedFn = function (data) {
    var include = function (path, includeData) {
      var d = utils.shallowCopy({}, data);
      if (includeData) {
        d = utils.shallowCopy(d, includeData);
      }
      return includeFile(path, opts)(d);
    };
    return fn.apply(opts.context, [data || {}, escapeFn, include, rethrow]);
  };
  returnedFn.dependencies = this.dependencies;
  return returnedFn;
},

generateSource: function () {
  var opts = this.opts;

  if (opts.rmWhitespace) {
    // Have to use two separate replace here as `^` and `$` operators don&#39;t
    // work well with `\r` and empty lines don&#39;t work well with the `m` flag.
    this.templateText =
      this.templateText.replace(/[\r\n]+/g, &#39;\n&#39;).replace(/^\s+|\s+$/gm, &#39;&#39;);
  }

  // Slurp spaces and tabs before &lt;%_ and after _%&gt;
  this.templateText =
    this.templateText.replace(/[ \t]*&lt;%_/gm, &#39;&lt;%_&#39;).replace(/_%&gt;[ \t]*/gm, &#39;_%&gt;&#39;);

  var self = this;
  var matches = this.parseTemplateText();
  var d = this.opts.delimiter;
  var o = this.opts.openDelimiter;
  var c = this.opts.closeDelimiter;

  if (matches &amp;&amp; matches.length) {
    matches.forEach(function (line, index) {
      var opening;
      var closing;
      var include;
      var includeOpts;
      var includeObj;
      var includeSrc;
      // If this is an opening tag, check for closing tags
      // FIXME: May end up with some false positives here
      // Better to store modes as k/v with openDelimiter + delimiter as key
      // Then this can simply check against the map
      if ( line.indexOf(o + d) === 0        // If it is a tag
        &amp;&amp; line.indexOf(o + d + d) !== 0) { // and is not escaped
        closing = matches[index + 2];
        if (!(closing == d + c || closing == &#39;-&#39; + d + c || closing == &#39;_&#39; + d + c)) {
          throw new Error(&#39;Could not find matching close tag for &quot;&#39; + line + &#39;&quot;.&#39;);
        }
      }
      // HACK: backward-compat `include` preprocessor directives
      if ((include = line.match(/^\s*include\s+(\S+)/))) {
        opening = matches[index - 1];
        // Must be in EVAL or RAW mode
        if (opening &amp;&amp; (opening == o + d || opening == o + d + &#39;-&#39; || opening == o + d + &#39;_&#39;)) {
          includeOpts = utils.shallowCopy({}, self.opts);
          includeObj = includeSource(include[1], includeOpts);
          if (self.opts.compileDebug) {
            includeSrc =
                &#39;    ; (function(){&#39; + &#39;\n&#39;
                + &#39;      var __line = 1&#39; + &#39;\n&#39;
                + &#39;      , __lines = &#39; + JSON.stringify(includeObj.template) + &#39;\n&#39;
                + &#39;      , __filename = &#39; + JSON.stringify(includeObj.filename) + &#39;;&#39; + &#39;\n&#39;
                + &#39;      try {&#39; + &#39;\n&#39;
                + includeObj.source
                + &#39;      } catch (e) {&#39; + &#39;\n&#39;
                + &#39;        rethrow(e, __lines, __filename, __line, escapeFn);&#39; + &#39;\n&#39;
                + &#39;      }&#39; + &#39;\n&#39;
                + &#39;    ; }).call(this)&#39; + &#39;\n&#39;;
          }else{
            includeSrc = &#39;    ; (function(){&#39; + &#39;\n&#39; + includeObj.source +
                &#39;    ; }).call(this)&#39; + &#39;\n&#39;;
          }
          self.source += includeSrc;
          self.dependencies.push(exports.resolveInclude(include[1],
            includeOpts.filename));
          return;
        }
      }
      self.scanLine(line);
    });
  }

},

parseTemplateText: function () {
  var str = this.templateText;
  var pat = this.regex;
  var result = pat.exec(str);
  var arr = [];
  var firstPos;

  while (result) {
    firstPos = result.index;

    if (firstPos !== 0) {
      arr.push(str.substring(0, firstPos));
      str = str.slice(firstPos);
    }

    arr.push(result[0]);
    str = str.slice(result[0].length);
    result = pat.exec(str);
  }

  if (str) {
    arr.push(str);
  }

  return arr;
},

_addOutput: function (line) {
  if (this.truncate) {
    // Only replace single leading linebreak in the line after
    // -%&gt; tag -- this is the single, trailing linebreak
    // after the tag that the truncation mode replaces
    // Handle Win / Unix / old Mac linebreaks -- do the \r\n
    // combo first in the regex-or
    line = line.replace(/^(?:\r\n|\r|\n)/, &#39;&#39;);
    this.truncate = false;
  }
  if (!line) {
    return line;
  }

  // Preserve literal slashes
  line = line.replace(/\\/g, &#39;\\\\&#39;);

  // Convert linebreaks
  line = line.replace(/\n/g, &#39;\\n&#39;);
  line = line.replace(/\r/g, &#39;\\r&#39;);

  // Escape double-quotes
  // - this will be the delimiter during execution
  line = line.replace(/&quot;/g, &#39;\\&quot;&#39;);
  this.source += &#39;    ; __append(&quot;&#39; + line + &#39;&quot;)&#39; + &#39;\n&#39;;
},

scanLine: function (line) {
  var self = this;
  var d = this.opts.delimiter;
  var o = this.opts.openDelimiter;
  var c = this.opts.closeDelimiter;
  var newLineCount = 0;

  newLineCount = (line.split(&#39;\n&#39;).length - 1);

  switch (line) {
  case o + d:
  case o + d + &#39;_&#39;:
    this.mode = Template.modes.EVAL;
    break;
  case o + d + &#39;=&#39;:
    this.mode = Template.modes.ESCAPED;
    break;
  case o + d + &#39;-&#39;:
    this.mode = Template.modes.RAW;
    break;
  case o + d + &#39;#&#39;:
    this.mode = Template.modes.COMMENT;
    break;
  case o + d + d:
    this.mode = Template.modes.LITERAL;
    this.source += &#39;    ; __append(&quot;&#39; + line.replace(o + d + d, o + d) + &#39;&quot;)&#39; + &#39;\n&#39;;
    break;
  case d + d + c:
    this.mode = Template.modes.LITERAL;
    this.source += &#39;    ; __append(&quot;&#39; + line.replace(d + d + c, d + c) + &#39;&quot;)&#39; + &#39;\n&#39;;
    break;
  case d + c:
  case &#39;-&#39; + d + c:
  case &#39;_&#39; + d + c:
    if (this.mode == Template.modes.LITERAL) {
      this._addOutput(line);
    }

    this.mode = null;
    this.truncate = line.indexOf(&#39;-&#39;) === 0 || line.indexOf(&#39;_&#39;) === 0;
    break;
  default:
    // In script mode, depends on type of tag
    if (this.mode) {
      // If &#39;//&#39; is found without a line break, add a line break.
      switch (this.mode) {
      case Template.modes.EVAL:
      case Template.modes.ESCAPED:
      case Template.modes.RAW:
        if (line.lastIndexOf(&#39;//&#39;) &gt; line.lastIndexOf(&#39;\n&#39;)) {
          line += &#39;\n&#39;;
        }
      }
      switch (this.mode) {
      // Just executing code
      case Template.modes.EVAL:
        this.source += &#39;    ; &#39; + line + &#39;\n&#39;;
        break;
        // Exec, esc, and output
      case Template.modes.ESCAPED:
        this.source += &#39;    ; __append(escapeFn(&#39; + stripSemi(line) + &#39;))&#39; + &#39;\n&#39;;
        break;
        // Exec and output
      case Template.modes.RAW:
        this.source += &#39;    ; __append(&#39; + stripSemi(line) + &#39;)&#39; + &#39;\n&#39;;
        break;
      case Template.modes.COMMENT:
        // Do nothing
        break;
        // Literal &lt;%% mode, append as raw output
      case Template.modes.LITERAL:
        this._addOutput(line);
        break;
      }
    }
    // In string mode, just add the output
    else {
      this._addOutput(line);
    }
  }

  if (self.opts.compileDebug &amp;&amp; newLineCount) {
    this.currentLine += newLineCount;
    this.source += &#39;    ; __line = &#39; + this.currentLine + &#39;\n&#39;;
  }
}</pre>

<p>};</p>

<p>/**</p>

<pre>Escape characters reserved in XML.

This is simply an export of {@link module:utils.escapeXML}.

If `markup` is `undefined` or `null`, the empty string is returned.

@param {String} markup Input string
@return {String} Escaped string
@public
@func
 /</pre>

<p>exports.escapeXML = utils.escapeXML;</p>

<p>/**</p>

<pre> Express.js support.

 This is an alias for {@link module:ejs.renderFile}, in order to support
 Express.js out-of-the-box.

 @func
/</pre>

<p>exports.__express = exports.renderFile;</p>

<p>// Add require support /* istanbul ignore else */ if (require.extensions) {</p>

<pre>require.extensions[&#39;.ejs&#39;] = function (module, flnm) {
  console.log(&#39;Deprecated: this API will go away in EJS v2.8&#39;);
  var filename = flnm || /* istanbul ignore next */ module.filename;
  var options = {
    filename: filename,
    client: true
  };
  var template = fileLoader(filename).toString();
  var fn = exports.compile(template, options);
  module._compile(&#39;module.exports = &#39; + fn.toString() + &#39;;&#39;, filename);
};</pre>

<p>}</p>

<p>/**</p>

<pre> Version of EJS.

 @readonly
 @type {String}
 @public
/</pre>

<p>exports.VERSION = _VERSION_STRING;</p>

<p>/**</p>

<pre> Name for detection of EJS.

 @readonly
 @type {String}
 @public
/</pre>

<p>exports.name = _NAME;</p>

<p>/* istanbul ignore if */ if (typeof window != &#39;undefined&#39;) {</p>

<pre class="ruby"><span class="ruby-identifier">window</span>.<span class="ruby-identifier">ejs</span> = <span class="ruby-identifier">exports</span>;
</pre>

<p>}</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.1.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

